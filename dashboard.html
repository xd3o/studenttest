<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ù„ÙˆØ­Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ - Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ© Ø±Ø§ÙØ¯ÙŠÙ†</title>
<link rel="stylesheet" href="style.css" />
<style>
/* Ø§Ù„Ø®Ù„ÙÙŠØ© */
body {
  background: url('https://k.top4top.io/p_3498f7ivx1.png') no-repeat center center fixed;
  background-size: cover;
  font-family: Tahoma, sans-serif;
  margin:0; padding:0;
}

/* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ */
header {
  background-color: #54B8C2; /* Ù„ÙˆÙ† Ù…ÙˆØ­Ø¯ */
  color:white;
  padding:14px 20px;
  text-align:center;
  font-weight:700;
  font-size:20px;
  position: relative;
}

/* Ø²Ø± Ø§Ù„Ø«Ù„Ø§Ø« Ø®Ø·ÙˆØ· */
#menu-toggle {
  position:absolute;
  top:12px;
  right:20px;
  cursor:pointer;
  font-size:28px;
  background:none;
  border:none;
  color:white;
}

/* Ø§Ù„ØªØºÙ„ÙŠÙ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
.app-wrap {
  display:flex;
  max-width:1100px;
  margin:20px auto;
  gap:20px;
}

/* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
.sidebar {
  width:250px;
  background: rgba(255,255,255,0.98);
  border-radius:8px;
  padding:12px;
  box-shadow:0 2px 8px rgba(0,0,0,0.06);
  position: fixed;
  top:0;
  bottom:0;
  right:-260px; /* Ù…Ø®ÙÙŠØ© Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§ */
  transition: right 0.3s ease;
  z-index:999;
}
.sidebar.show {
  right:0;
}

.sidebar img.logo-small {
  display:block;
  margin: 0 auto 10px auto;
  width:80px;
}

.sidebar button {
  width:100%;
  text-align:right;
  padding:10px 12px;
  margin:6px 0;
  font-size:15px;
  cursor:pointer;
  border-radius:6px;
  border:1px solid rgba(0,0,0,0.06);
  background:#fff;
}
.sidebar button.active {
  background: linear-gradient(90deg,#F4BE45,#54B8C2);
  color:#fff;
  border:none;
}

/* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
.main {
  flex:1;
  background: rgba(255,255,255,0.98);
  border-radius:8px;
  padding:18px;
  box-shadow:0 2px 8px rgba(0,0,0,0.06);
  min-height:80vh;
}

/* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ */
.student-card {
  display:flex;
  gap:14px;
  align-items:center;
  margin-bottom:14px;
}
.student-info h2 { margin:0 0 6px 0; font-size:20px; }
.student-meta { color:#555; font-size:14px; }

/* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© */
.admin-message {
  margin:12px 0;
  padding:12px;
  background: #fff6e6;
  border-left:4px solid #F4BE45;
  border-radius:6px;
  display:none;
}

/* Ø§Ù„Ø£Ø®Ø¨Ø§Ø± */
.news-list {
  display:grid;
  grid-template-columns: repeat(auto-fit,minmax(260px,1fr));
  gap:12px;
  margin-top:10px;
}
.news-card {
  padding:12px;
  border-radius:8px;
  background:#fafafa;
  border:1px solid #eee;
}
.news-card h4 { margin:0 0 6px 0; font-size:15px; }
.news-card time { color:#777; font-size:13px; }

/* Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ */
table { width:100%; border-collapse:collapse; margin-bottom:14px; }
th, td { border:1px solid #ddd; padding:8px; text-align:center; }
th { background:#F4BE45; color:#fff; }

/* Ø£Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
.hidden { display:none; }

/* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… */
body.dark .main, body.dark .sidebar {
  background: rgba(32,32,32,0.86);
  color:#e9eef1;
}
body.dark .news-card {
  background: rgba(0,0,0,0.45);
  border-color: rgba(255,255,255,0.06);
}
body.dark .admin-message {
  background: rgba(255,255,255,0.03);
  border-left-color: #F4BE45;
  color:#fff;
}

/* Responsive */
@media(max-width:900px){
  .app-wrap{ flex-direction:column; padding:12px; margin:12px; }
}
</style>
</head>
<body>
<header>
  Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ© Ø±Ø§ÙØ¯ÙŠÙ† - Ù„ÙˆØ­Ø© Ø§Ù„Ø·Ø§Ù„Ø¨
  <button id="menu-toggle">â˜°</button>
</header>

<div class="app-wrap">
  <aside class="sidebar" id="sidebar">
    <img src="https://e.top4top.io/p_34909jjnx0.png" alt="Ù„ÙˆØºÙˆ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©" class="logo-small" />
    <button data-section="home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <button data-section="grades">Ø¯Ø±Ø¬Ø§ØªÙŠ</button>
    <button data-section="timetable">Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</button>
    <button data-section="activities">Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</button>
    <button data-section="contact">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</button>
    <button id="dark-mode-btn">Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù…</button>
  </aside>

  <main class="main" id="main-content">
    <section id="home-section">
      <div class="student-card">
        <div style="width:82px;height:82px;border-radius:10px;background:#f1f1f1;display:flex;align-items:center;justify-content:center;font-size:28px;color:#777">ğŸ‘©â€ğŸ“</div>
        <div class="student-info">
          <h2 id="student-name">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</h2>
          <div class="student-meta">Ø§Ù„ØµÙ <span id="student-class">-</span> â€” Ø´Ø¹Ø¨Ø© <span id="student-section">-</span></div>
        </div>
      </div>
      <div id="admin-msg" class="admin-message" aria-live="polite"></div>
      <div class="section">
        <h3>Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h3>
        <div id="news-container" class="news-list" aria-live="polite"></div>
      </div>
    </section>

    <section id="grades-section" class="hidden"></section>
    <section id="timetable-section" class="hidden"></section>
    <section id="activities-section" class="hidden"></section>
    <section id="contact-section" class="hidden">
      <h3>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h3>
      <div style="margin-top:10px">
        <a href="#" target="_blank">ÙÙŠØ³Ø¨ÙˆÙƒ</a> â€”
        <a href="#" target="_blank">ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…</a>
      </div>
    </section>
  </main>
</div>

<script>
// DOM helpers
const $ = s => document.querySelector(s);
const $$ = s => document.querySelectorAll(s);

const sidebar = $('#sidebar');
const menuToggle = $('#menu-toggle');
const mainSections = ['home','grades','timetable','activities','contact'];

menuToggle.addEventListener('click',()=>sidebar.classList.toggle('show'));

// Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ø²Ø±
$$('.sidebar button[data-section]').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const section = btn.dataset.section;
    mainSections.forEach(sec=>{
      $('#'+sec+'-section').classList.add('hidden');
    });
    $('#'+section+'-section').classList.remove('hidden');
    sidebar.classList.remove('show');
  });
});

// Dark mode toggle
const darkBtn = $('#dark-mode-btn');
darkBtn.addEventListener('click', ()=>{
  document.body.classList.toggle('dark');
  localStorage.setItem('darkMode', document.body.classList.contains('dark')?'1':'0');
});
if(localStorage.getItem('darkMode')==='1') document.body.classList.add('dark');

// ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨
const student = JSON.parse(localStorage.getItem('studentData') || 'null');
if(!student){ alert('ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„'); window.location.href='index.html'; }
else{
  $('#student-name').textContent = student['Ø§Ù„Ø§Ø³Ù…']||'-';
  $('#student-class').textContent = student['Ø§Ù„ØµÙ']||'-';
  $('#student-section').textContent = student['Ø§Ù„Ø´Ø¹Ø¨Ø©']||'-';
  // Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
  const adminMsg = student['Ø±Ø³Ø§Ù„Ø©_Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©']||student['adminMessage']||'';
  if(adminMsg){ $('#admin-msg').style.display='block'; $('#admin-msg').textContent=adminMsg; }
  // Ø¯Ø±Ø¬Ø§Øª
  const gradesContainer = $('#grades-section');
  const grades = student['Ø§Ù„Ø¯Ø±Ø¬Ø§Øª'] || {};
  let gradesHTML='<h3>Ø¯Ø±Ø¬Ø§ØªÙŠ</h3>';
  for(const subject in grades){
    gradesHTML += `<table><thead><tr><th>Ø§Ù„Ù…Ø§Ø¯Ø©</th><th>Ù†ÙˆØ¹</th><th>Ø§Ù„Ø¯Ø±Ø¬Ø©</th></tr></thead><tbody>`;
    for(const type in grades[subject]){
      gradesHTML += `<tr><td>${subject}</td><td>${type}</td><td>${grades[subject][type]}</td></tr>`;
    }
    gradesHTML += `</tbody></table>`;
  }
  gradesContainer.innerHTML=gradesHTML;

  // Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ
  const ttContainer = $('#timetable-section');
  const timetable = student['Ø§Ù„Ø¬Ø¯ÙˆÙ„']||{};
  let ttHTML='<h3>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</h3><table><thead><tr><th>Ø§Ù„ÙŠÙˆÙ…</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th></tr></thead><tbody>';
  for(const day in timetable){
    ttHTML+='<tr><td>'+day+'</td>';
    for(let i=0;i<6;i++){ ttHTML+='<td>'+ (timetable[day][i]||'-') +'</td>'; }
    ttHTML+='</tr>';
  }
  ttHTML+='</tbody></table>';
  ttContainer.innerHTML=ttHTML;

  // Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª
  fetch('/student/ac.json').then(r=>r.json()).then(list=>{
    const acContainer = $('#activities-section');
    let acHTML='<h3>Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</h3><table><thead><tr><th>Ø§Ù„Ù†Ø´Ø§Ø·</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th></tr></thead><tbody>';
    list.forEach(a=>{ acHTML+='<tr><td>'+a.title+'</td><td>'+a.date+'</td></tr>'; });
    acHTML+='</tbody></table>';
    acContainer.innerHTML=acHTML;
  }).catch(e=>$('#activities-section').innerHTML='<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ø´Ø§Ø·Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.</p>');

  // Ø§Ù„Ø£Ø®Ø¨Ø§Ø±
  fetch('/student/news.json').then(r=>r.json()).then(list=>{
    list.sort((a,b)=> new Date(b.date)-new Date(a.date));
    const newsCont = $('#news-container');
    newsCont.innerHTML='';
    list.slice(0,3).forEach(n=>{
      const card = document.createElement('div');
      card.className='news-card';
      card.innerHTML=`<h4>${n.title}</h4><time>${n.date}</time><p>${n.description||''}</p>`;
      newsCont.appendChild(card);
    });
  }).catch(e=>$('#news-container').innerHTML='<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø®Ø¨Ø§Ø± Ø­Ø§Ù„ÙŠØ§Ù‹.</p>');
}
</script>
</body>
</html>
