<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø·Ø§Ù„Ø¨ â€“ Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ© Ø±Ø§ÙØ¯ÙŠÙ†</title>
  <style>
    body { 
      margin: 0; 
      font-family: "Arial", sans-serif; 
      background-color: #f9f9f9; 
      direction: rtl; 
    }
    header { 
      background-color: #f4b400; 
      color: white; 
      text-align: center; 
      padding: 20px; 
    }
    .logo { 
      width: 60px; 
      margin-bottom: 10px; 
    }
    .school-title { 
      font-size: 24px; 
      margin: 0; 
    }
    .container { 
      max-width: 1200px; 
      margin: 20px auto; 
      padding: 15px; 
    }
    .info { 
      text-align: center; 
      margin-bottom: 20px; 
    }
    .info h2 { 
      margin: 10px 0; 
      font-size: 20px; 
    }
    .card { 
      background: white; 
      border-radius: 10px; 
      padding: 15px; 
      margin-bottom: 20px; 
      box-shadow: 0 1px 6px rgba(0,0,0,0.1); 
      overflow-x: auto; 
    }
    .card h3 { 
      color: #38b6b2; 
      border-bottom: 1px solid #ddd; 
      padding-bottom: 5px; 
      margin-bottom: 10px; 
      font-size: 20px; 
    }
    table { 
      width: 100%; 
      border-collapse: collapse; 
      font-size: 15px; 
      min-width: 600px; 
    }
    th, td { 
      border: 1px solid #ccc; 
      padding: 10px; 
      text-align: center; 
    }
    th { 
      background-color: #f4b400; 
      color: white; 
    }
    .footer { 
      text-align: center; 
      font-size: 14px; 
      margin: 20px 0; 
      color: #444; 
    }
    .fail { 
      color: red; 
      font-weight: bold; 
    }
    .admin-box {
      background: #e3f2fd;
      border: 1px solid #90caf9;
      padding: 15px;
      margin: 15px auto;
      border-radius: 8px;
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      color: #0d47a1;
    }
    .pdf-btn {
      display: block;
      margin: 20px auto;
      background: #38b6b2;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
    }
    .pdf-btn:hover {
      background: #2a918e;
    }
    .honor-board {
      background: #fff3e0;
      border: 1px solid #ffcc80;
      padding: 15px;
      border-radius: 10px;
      margin-top: 20px;
    }
    .honor-board h3 {
      color: #e65100;
    }
    .social-links {
      margin-top: 25px;
      text-align: center;
    }
    .social-links img {
      width: 40px;
      margin: 0 10px;
      cursor: pointer;
    }
    @media (max-width: 600px) {
      .info h2, .card h3 { font-size: 16px; }
      table, th, td { font-size: 13px; }
      table { min-width: unset; }
    }
    @media (min-width: 601px) and (max-width: 991px) {
      .info h2 { font-size: 18px; }
      table { font-size: 14px; }
    }
    @media (min-width: 992px) {
      .info h2 { font-size: 22px; }
      table { font-size: 16px; }
    }
  </style>
</head>
<body>

<header>
  <img src="https://e.top4top.io/p_34909jjnx0.png" alt="Ø´Ø¹Ø§Ø±" class="logo">
  <h1 class="school-title">Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ© Ø±Ø§ÙØ¯ÙŠÙ†</h1>
</header>

<div class="container">
  <div class="info">
    <h2>Ø§Ù„Ø§Ø³Ù…: <span id="student-name">---</span></h2>
    <h2>Ø§Ù„ØµÙ: <span id="student-class">---</span> - Ø§Ù„Ø´Ø¹Ø¨Ø© <span id="student-section">---</span></h2>
    <div id="admin-message" class="admin-box"></div>
  </div>

  <button class="pdf-btn" onclick="downloadPDF()">ğŸ“„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ÙƒÙ€ PDF</button>

  <div class="card">
    <h3>Ø§Ù„ÙƒÙˆØ±Ø³ Ø§Ù„Ø£ÙˆÙ„</h3>
    <table>
      <thead>
        <tr><th>Ø§Ù„Ù…Ø§Ø¯Ø©</th><th>Ø´Ù‡Ø± 1</th><th>Ø´Ù‡Ø± 2</th><th>Ø´Ù‡Ø± 3</th><th>Ø³Ø¹ÙŠ 1</th><th>Ù†ØµÙ Ø§Ù„Ø³Ù†Ø©</th></tr>
      </thead>
      <tbody id="course1-body"></tbody>
    </table>
  </div>

  <div class="card">
    <h3>Ø§Ù„ÙƒÙˆØ±Ø³ Ø§Ù„Ø«Ø§Ù†ÙŠ</h3>
    <table>
      <thead>
        <tr><th>Ø§Ù„Ù…Ø§Ø¯Ø©</th><th>Ø´Ù‡Ø± 1</th><th>Ø´Ù‡Ø± 2</th><th>Ø´Ù‡Ø± 3</th><th>Ø³Ø¹ÙŠ 2</th><th>Ø§Ù„Ø³Ø¹ÙŠ Ø§Ù„Ø³Ù†ÙˆÙŠ</th><th>Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</th><th>Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„</th></tr>
      </thead>
      <tbody id="course2-body"></tbody>
    </table>
  </div>

  <div class="card">
    <h3>Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</h3>
    <table>
      <thead>
        <tr><th>Ø§Ù„ÙŠÙˆÙ…</th><th>Ø§Ù„Ø­ØµØ© 1</th><th>Ø§Ù„Ø­ØµØ© 2</th><th>Ø§Ù„Ø­ØµØ© 3</th><th>Ø§Ù„Ø­ØµØ© 4</th><th>Ø§Ù„Ø­ØµØ© 5</th><th>Ø§Ù„Ø­ØµØ© 6</th></tr>
      </thead>
      <tbody id="schedule-body"></tbody>
    </table>
  </div>

  <div class="honor-board">
    <h3>Ù„ÙˆØ­Ø© Ø§Ù„Ø´Ø±Ù</h3>
    <ul id="honor-list"></ul>
  </div>

  <div class="social-links">
    <a href="https://facebook.com/YourSchoolPage" target="_blank">
      <img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="Facebook">
    </a>
    <a href="https://t.me/Alrafidain2023" target="_blank">
      <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" alt="Telegram">
    </a>
  </div>

</div>

<!-- Ù…ÙƒØªØ¨Ø© Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¥Ù„Ù‰ PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<script>
  const student = JSON.parse(localStorage.getItem("studentData"));
  if (!student) {
    document.body.innerHTML = "<h2 style='text-align:center;margin-top:50px;'>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„.</h2>";
  } else {
    document.getElementById("student-name").textContent = student["Ø§Ù„Ø§Ø³Ù…"];
    document.getElementById("student-class").textContent = student["Ø§Ù„ØµÙ"];
    document.getElementById("student-section").textContent = student["Ø§Ù„Ø´Ø¹Ø¨Ø©"];
    document.getElementById("admin-message").textContent = student["Ø±Ø³Ø§Ù„Ø©"] || "Ù†ØªÙ…Ù†Ù‰ Ù„ÙƒÙ… Ø§Ù„Ù†Ø¬Ø§Ø­ ÙˆØ§Ù„ØªÙˆÙÙŠÙ‚.";

    const c1 = document.getElementById("course1-body");
    const c2 = document.getElementById("course2-body");

    for (const [subject, data] of Object.entries(student["Ø§Ù„Ø¯Ø±Ø¬Ø§Øª"])) {
      const tdOrRed = v => (parseFloat(v) < 50 ? `<td class="fail">${v}</td>` : `<td>${v}</td>`);

      c1.innerHTML += `<tr><td>${subject}</td>
        <td>${data["Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø£ÙˆÙ„"]}</td>
        <td>${data["Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ"]}</td>
        <td>${data["Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø«Ø§Ù„Ø«"]}</td>
        <td>${data["Ø§Ù„Ø³Ø¹ÙŠ Ø§Ù„Ø£ÙˆÙ„"]}</td>
        ${tdOrRed(data["Ù†ØµÙ Ø§Ù„Ø³Ù†Ø©"])}</tr>`;

      c2.innerHTML += `<tr><td>${subject}</td>
        <td>${data["Ø§Ù„ÙƒÙˆØ±Ø³ Ø§Ù„Ø«Ø§Ù†ÙŠ - Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø£ÙˆÙ„"]}</td>
        <td>${data["Ø§Ù„ÙƒÙˆØ±Ø³ Ø§Ù„Ø«Ø§Ù†ÙŠ - Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ"]}</td>
        <td>${data["Ø§Ù„ÙƒÙˆØ±Ø³ Ø§Ù„Ø«Ø§Ù†ÙŠ - Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø«Ø§Ù„Ø«"]}</td>
        <td>${data["Ø§Ù„Ø³Ø¹ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ"]}</td>
        <td>${data["Ø§Ù„Ø³Ø¹ÙŠ Ø§Ù„Ø³Ù†ÙˆÙŠ"]}</td>
        ${tdOrRed(data["Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©"])}
        ${tdOrRed(data["Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„"])}</tr>`;
    }

    const scheduleBody = document.getElementById("schedule-body");
    const week = student["Ø§Ù„Ø¬Ø¯ÙˆÙ„"];
    for (const day in week) {
      scheduleBody.innerHTML += `<tr><td>${day}</td>` + week[day].map(p => `<td>${p}</td>`).join("") + "</tr>";
    }

    // Ù„ÙˆØ­Ø© Ø§Ù„Ø´Ø±Ù
    const honorList = document.getElementById("honor-list");
    const honorStudents = [
      { name: "Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ", class: "Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¹Ù„Ù…ÙŠ", section: "Ø£" },
      { name: "Ø²ÙŠÙ†Ø¨ Ø­Ø³Ù†", class: "Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¹Ù„Ù…ÙŠ", section: "Ø¨" },
      { name: "Ø­Ø³ÙŠÙ† ÙƒØ§Ø¸Ù…", class: "Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø£Ø¯Ø¨ÙŠ", section: "Ø¬" }
    ];
    honorStudents.forEach(st => {
      const li = document.createElement("li");
      li.textContent = `${st.name} â€“ ${st.class} (${st.section})`;
      honorList.appendChild(li);
    });
  }

  // ÙˆØ¸ÙŠÙØ© ØªØ­Ù…ÙŠÙ„ PDF
  function downloadPDF() {
    const element = document.querySelector(".container");
    html2pdf().set({
      margin: 0.5,
      filename: "student-dashboard.pdf",
      image: { type: "jpeg", quality: 0.98 },
      html2canvas: { scale: 2 },
      jsPDF: { unit: "in", format: "a4", orientation: "portrait" }
    }).from(element).save();
  }
</script>

</body>
</html>
