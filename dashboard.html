<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ù„ÙˆØ­Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ - Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ© Ø±Ø§ÙØ¯ÙŠÙ†</title>
<link rel="stylesheet" href="style.css" />
<style>
body {
  font-family: 'Tahoma', sans-serif;
  margin:0;
  background: url('https://k.top4top.io/p_3498f7ivx1.png') no-repeat center center fixed;
  background-size: cover;
}
header {
  background: linear-gradient(90deg,#54B8C2,#F4BE45);
  color:white;
  padding:12px 20px;
}
header .top-bar {
  max-width:1100px;
  margin:0 auto;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
header .top-bar .logo-small { width:50px; }
header .top-bar button { padding:6px 8px;border-radius:6px;border:none;cursor:pointer;background:white;color:#333; }

.app-wrap {
  max-width:1100px;
  margin:30px auto;
  display:flex;
  gap:20px;
  padding:20px;
  position:relative;
}

/* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© - Ù…Ø®ÙÙŠØ© Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§ */
.sidebar {
  width:250px;
  background: rgba(255,255,255,0.95);
  border-radius:8px;
  padding:12px;
  box-shadow:0 2px 8px rgba(0,0,0,0.06);
  height:100%;
  position:fixed;
  top:0;
  right:-260px; /* Ù…Ø®ÙÙŠØ© Ø®Ø§Ø±Ø¬ Ø§Ù„Ø´Ø§Ø´Ø© */
  transition: right 0.3s ease;
  z-index:1000;
}
.sidebar.active { right:0; }
.sidebar .logo-small { display:block; margin:0 auto 10px auto; }
.sidebar button { width:100%; text-align:right; padding:10px 12px; margin:6px 0; font-size:15px; cursor:pointer; border-radius:6px; border:1px solid rgba(0,0,0,0.06); background:#fff; }
.sidebar button.active { background: linear-gradient(90deg,#F4BE45,#54B8C2); color:#fff; border:none; box-shadow:0 2px 6px rgba(0,0,0,0.08); }

/* Ù…Ø­ØªÙˆÙ‰ Ø±Ø¦ÙŠØ³ÙŠ */
.main { flex:1; background: rgba(255,255,255,0.95); border-radius:8px; padding:18px; box-shadow:0 2px 8px rgba(0,0,0,0.06); }
.student-card { display:flex; gap:14px; align-items:center; margin-bottom:14px; }
.student-info { flex:1; }
.student-info h2 { margin:0 0 6px 0; font-size:20px; }
.student-meta { color:#555; font-size:14px; }
.admin-message { margin:12px 0; padding:12px; background: #fff6e6; border-left:4px solid #F4BE45; border-radius:6px; display:none; }
.section { margin-top:14px; }
.hidden { display:none; }
table { width:100%; border-collapse:collapse; margin-top:10px; }
th, td { border:1px solid #ddd; padding:8px; text-align:center; font-size:14px; }
th { background:#F4BE45; color:white; }
td.fail { color:red; font-weight:bold; }

@media(max-width:900px){
  .app-wrap{ flex-direction:column; padding:12px; margin:12px; }
}
</style>
</head>
<body>
<header>
  <div class="top-bar">
    <img src="https://e.top4top.io/p_34909jjnx0.png" class="logo-small" />
    <div>
      <button id="menu-btn">â˜° Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
      <button id="logoutBtn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>
  </div>
</header>

<div class="app-wrap">
  <aside class="sidebar" id="sidebar">
    <img src="https://e.top4top.io/p_34909jjnx0.png" alt="Ù„ÙˆØºÙˆ" class="logo-small" />
    <button id="btn-home" class="active">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <button id="btn-grades">Ø¯Ø±Ø¬Ø§ØªÙŠ</button>
    <button id="btn-timetable">Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</button>
    <button id="btn-activities">Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</button>
    <button id="btn-dark">Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù…</button>
    <button id="btn-contact">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</button>
  </aside>

  <main class="main">
    <section id="home-section">
      <div class="student-card">
        <div style="width:82px;height:82px;border-radius:10px;background:#f1f1f1;display:flex;align-items:center;justify-content:center;font-size:28px;color:#777">ğŸ‘©â€ğŸ“</div>
        <div class="student-info">
          <h2 id="student-name">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</h2>
          <div class="student-meta"><span id="student-class">Ø§Ù„ØµÙ</span> â€” Ø´Ø¹Ø¨Ø© <span id="student-section">Ø´Ø¹Ø¨Ø©</span></div>
        </div>
      </div>
      <div id="admin-msg" class="admin-message"></div>
    </section>

    <section id="grades-section" class="hidden section">
      <h3>Ø¯Ø±Ø¬Ø§ØªÙŠ</h3>
      <div id="grades-container"></div>
    </section>

    <section id="timetable-section" class="hidden section">
      <h3>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</h3>
      <div id="timetable-container"></div>
    </section>

    <section id="activities-section" class="hidden section">
      <h3>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</h3>
      <div id="activities-container"><p class="light-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ø´Ø§Ø·Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.</p></div>
    </section>

    <section id="contact-section" class="hidden section">
      <h3>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h3>
      <p class="light-muted">Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªÙˆØ§ØµÙ„ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©.</p>
    </section>
  </main>
</div>

<script>
// helpers
function q(sel){ return document.querySelector(sel); }
function showSection(id){
  document.querySelectorAll('.main section').forEach(s=>s.classList.add('hidden'));
  const el = document.getElementById(id);
  if(el) el.classList.remove('hidden');
  document.querySelectorAll('.sidebar button').forEach(b=>b.classList.remove('active'));
  const map = { 'home-section':'btn-home','grades-section':'btn-grades','timetable-section':'btn-timetable','activities-section':'btn-activities','contact-section':'btn-contact' };
  const btn = document.getElementById(map[id]);
  if(btn) btn.classList.add('active');
  // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ø¨Ø¹Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ø²Ø±
  q('#sidebar').classList.remove('active');
}

// load student
const student = JSON.parse(localStorage.getItem('studentData') || 'null');
if(!student){
  alert('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨. ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.');
  window.location.href='index.html';
} else {
  q('#student-name').textContent = student['Ø§Ù„Ø§Ø³Ù…'] || 'â€”';
  q('#student-class').textContent = student['Ø§Ù„ØµÙ'] || 'â€”';
  q('#student-section').textContent = student['Ø§Ù„Ø´Ø¹Ø¨Ø©'] || 'â€”';

  // admin message
  if(student['Ø±Ø³Ø§Ù„Ø©'] && student['Ø±Ø³Ø§Ù„Ø©'].trim()!==''){
    q('#admin-msg').style.display='block';
    q('#admin-msg').textContent = student['Ø±Ø³Ø§Ù„Ø©'];
  }

  // render grades
  const grades = student['Ø§Ù„Ø¯Ø±Ø¬Ø§Øª'];
  if(grades){
    let html = '<table><thead><tr><th>Ø§Ù„Ù…Ø§Ø¯Ø©</th><th>Ø´Ù‡Ø± 1</th><th>Ø´Ù‡Ø± 2</th><th>Ø´Ù‡Ø± 3</th><th>Ø³Ø¹ÙŠ 1</th><th>Ù†ØµÙ Ø§Ù„Ø³Ù†Ø©</th><th>Ø³Ø¹ÙŠ 2</th><th>Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</th><th>Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„</th></tr></thead><tbody>';
    for(const subj in grades){
      const g = grades[subj];
      html += `<tr>
        <td>${subj}</td>
        <td class="${g['Ø´Ù‡Ø±1']<50?'fail':''}">${g['Ø´Ù‡Ø±1']??'â€”'}</td>
        <td class="${g['Ø´Ù‡Ø±2']<50?'fail':''}">${g['Ø´Ù‡Ø±2']??'â€”'}</td>
        <td class="${g['Ø´Ù‡Ø±3']<50?'fail':''}">${g['Ø´Ù‡Ø±3']??'â€”'}</td>
        <td class="${g['Ø³Ø¹ÙŠ1']<50?'fail':''}">${g['Ø³Ø¹ÙŠ1']??'â€”'}</td>
        <td class="${g['Ù†ØµÙ Ø§Ù„Ø³Ù†Ø©']<50?'fail':''}">${g['Ù†ØµÙ Ø§Ù„Ø³Ù†Ø©']??'â€”'}</td>
        <td class="${g['Ø³Ø¹ÙŠ2']<50?'fail':''}">${g['Ø³Ø¹ÙŠ2']??'â€”'}</td>
        <td class="${g['Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ']<50?'fail':''}">${g['Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ']??'â€”'}</td>
        <td class="${g['Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„']<50?'fail':''}">${g['Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„']??'â€”'}</td>
      </tr>`;
    }
    html+='</tbody></table>';
    q('#grades-container').innerHTML=html;
  } else {
    q('#grades-container').innerHTML='<p class="light-muted">Ù„Ø§ ØªØªÙˆÙØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ø±Ø¬Ø§Øª.</p>';
  }

  // timetable
  const tt = student['Ø§Ù„Ø¬Ø¯ÙˆÙ„'];
  if(tt){
    let html = '<table><thead><tr><th>Ø§Ù„ÙŠÙˆÙ…</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th></tr></thead><tbody>';
    for(const day in tt){
      html+='<tr><td>'+day+'</td>';
      for(let i=0;i<6;i++){
        html+='<td>'+(tt[day][i]??'â€”')+'</td>';
      }
      html+='</tr>';
    }
    html+='</tbody></table>';
    q('#timetable-container').innerHTML=html;
  }
}

// sidebar toggle
const menuBtn = q('#menu-btn');
const sidebar = q('#sidebar');
menuBtn.addEventListener('click',()=> sidebar.classList.toggle('active'));

// sidebar buttons
q('#btn-home').addEventListener('click',()=> showSection('home-section'));
q('#btn-grades').addEventListener('click',()=> showSection('grades-section'));
q('#btn-timetable').addEventListener('click',()=> showSection('timetable-section'));
q('#btn-activities').addEventListener('click',()=> showSection('activities-section'));
q('#btn-contact').addEventListener('click',()=> showSection('contact-section'));

// dark mode
const darkBtn = q('#btn-dark');
darkBtn.addEventListener('click',()=>{
  document.body.classList.toggle('dark');
  darkBtn.classList.toggle('active');
  localStorage.setItem('darkMode', document.body.classList.contains('dark')?'1':'0');
});
if(localStorage.getItem('darkMode')==='1'){ document.body.classList.add('dark'); darkBtn.classList.add('active'); }

// logout
q('#logoutBtn').addEventListener('click',()=>{
  localStorage.removeItem('studentData');
  window.location.href='index.html';
});

// load news
fetch('/student/news.json').then(r=>r.json()).then(list=>{
  const container = document.createElement('div'); container.id='news-container';
  list.sort((a,b)=> new Date(b.date)-new Date(a.date));
  list.slice(0,3).forEach(n=>{
    const div = document.createElement('div'); div.textContent = n.title; container.appendChild(div);
  });
  q('#home-section').appendChild(container);
});

// load activities
fetch('/student/ac.json').then(r=>r.json()).then(list=>{
  const container = q('#activities-container');
  if(list.length>0){
    let html='<table><thead><tr><th>Ø§Ù„Ù†Ø´Ø§Ø·</th><th>Ø§Ù„ÙŠÙˆÙ…</th><th>Ø§Ù„ÙˆÙ‚Øª</th></tr></thead><tbody>';
    list.forEach(a=> html+='<tr><td>'+a.name+'</td><td>'+a.day+'</td><td>'+a.time+'</td></tr>');
    html+='</tbody></table>';
    container.innerHTML=html;
  }
});
</script>
</body>
</html>
