<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ù„ÙˆØ­Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ - Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ© Ø±Ø§ÙØ¯ÙŠÙ†</title>
<link rel="stylesheet" href="style.css" />
<style>
body {
  margin:0; font-family:Tahoma,sans-serif;
  background: url('https://k.top4top.io/p_3498f7ivx1.png') no-repeat center center fixed;
  background-size: cover;
}
.app-wrap { display:flex; flex-direction:row; max-width:1100px; margin:0 auto; padding:20px; gap:20px; }
.sidebar {
  position:fixed; top:0; right:-250px; width:250px; height:100%; background:rgba(255,255,255,0.95);
  box-shadow: -2px 0 8px rgba(0,0,0,0.1); padding:12px; transition:right 0.3s ease; z-index:1000;
}
.sidebar.active { right:0; }
.sidebar img.logo-small { display:block; margin:0 auto 10px auto; width:60px; }
.sidebar button {
  width:100%; text-align:right; padding:10px 12px; margin:6px 0;
  font-size:15px; cursor:pointer; border-radius:6px; border:1px solid rgba(0,0,0,0.06); background:#fff;
}
.sidebar button.active { background: linear-gradient(90deg,#F4BE45,#54B8C2); color:#fff; border:none; box-shadow:0 2px 6px rgba(0,0,0,0.08); }

.main { flex:1; margin-right:0; padding:18px; background: rgba(255,255,255,0.95); border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.06); }

.header-top { display:flex; justify-content:space-between; align-items:center; padding:12px 20px; background:linear-gradient(90deg,#54B8C2,#F4BE45); color:white; font-weight:700; }

.menu-toggle { font-size:24px; cursor:pointer; }

.student-card { display:flex; gap:14px; align-items:center; margin-bottom:14px; }
.student-info h2 { margin:0 0 6px 0; font-size:20px; }
.student-meta { color:#555; font-size:14px; }
.admin-message { margin:12px 0; padding:12px; background:#fff6e6; border-left:4px solid #F4BE45; border-radius:6px; display:none; }
.news-list { display:grid; grid-template-columns: repeat(auto-fit,minmax(260px,1fr)); gap:12px; margin-top:10px; }
.news-card { padding:12px; border-radius:8px; background:#fafafa; border:1px solid #eee; }
.news-card h4 { margin:0 0 6px 0; font-size:15px; }
.news-card time { color:#777; font-size:13px; }

.hidden { display:none; }
.light-muted { color:#666; font-size:13px; }

table { border-collapse: collapse; width:100%; }
table th, table td { border:1px solid #ccc; padding:6px 8px; text-align:center; }
table th { background:#F4BE45; color:#fff; }

body.dark .main, body.dark .sidebar { background: rgba(32,32,32,0.85); color:#e9eef1; }
body.dark .news-card { background: rgba(0,0,0,0.45); border-color: rgba(255,255,255,0.06); }
body.dark .admin-message { background: rgba(255,255,255,0.03); border-left-color: #F4BE45; color:#fff; }
body.dark table th { background:#54B8C2; }
body.dark table td, body.dark table th { color:#fff; }

@media (max-width:900px){
  .app-wrap{ flex-direction:column; padding:12px; margin:12px; }
  .sidebar{ width:80%; }
}
</style>
</head>
<body>
<div class="header-top">
  <div class="menu-toggle" id="menuBtn">â˜°</div>
  <div>Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ© Ø±Ø§ÙØ¯ÙŠÙ† - Ù„ÙˆØ­Ø© Ø§Ù„Ø·Ø§Ù„Ø¨</div>
  <button id="logoutBtn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
</div>

<div class="app-wrap">
  <aside class="sidebar" id="sidebar">
    <img src="https://e.top4top.io/p_34909jjnx0.png" alt="Ù„ÙˆØºÙˆ" class="logo-small" />
    <button id="btn-home" class="active">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <button id="btn-grades">Ø¯Ø±Ø¬Ø§ØªÙŠ</button>
    <button id="btn-timetable">Ø¬Ø¯ÙˆÙ„ÙŠ</button>
    <button id="btn-activities">Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</button>
    <button id="btn-contact">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</button>
    <button id="btn-dark">Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù…</button>
  </aside>

  <main class="main" role="main">
    <!-- Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <section id="home-section">
      <div class="student-card">
        <div style="width:82px;height:82px;border-radius:10px;background:#f1f1f1;display:flex;align-items:center;justify-content:center;font-size:28px;color:#777">ğŸ‘©â€ğŸ“</div>
        <div class="student-info">
          <h2 id="student-name">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</h2>
          <div class="student-meta"><span id="student-class">Ø§Ù„ØµÙ</span> â€” Ø´Ø¹Ø¨Ø© <span id="student-section">Ø´Ø¹Ø¨Ø©</span></div>
        </div>
      </div>
      <div id="admin-msg" class="admin-message"></div>
      <div class="section">
        <h3>Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h3>
        <div id="news-container" class="news-list"></div>
      </div>
    </section>

    <!-- Ø§Ù„Ø¯Ø±Ø¬Ø§Øª -->
    <section id="grades-section" class="hidden section">
      <h3>Ø¯Ø±Ø¬Ø§ØªÙŠ</h3>
      <div id="grades-container"></div>
    </section>

    <!-- Ø§Ù„Ø¬Ø¯ÙˆÙ„ -->
    <section id="timetable-section" class="hidden section">
      <h3>Ø¬Ø¯ÙˆÙ„ÙŠ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</h3>
      <div id="timetable-container"></div>
    </section>

    <!-- Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª -->
    <section id="activities-section" class="hidden section">
      <h3>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</h3>
      <div id="activities-container"></div>
    </section>

    <!-- ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ -->
    <section id="contact-section" class="hidden section">
      <h3>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h3>
      <div><a id="fb-link" href="#" target="_blank">ÙÙŠØ³Ø¨ÙˆÙƒ</a> â€” <a id="tg-link" href="#" target="_blank">ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…</a></div>
    </section>
  </main>
</div>

<script>
// Ø§Ù„Ø¹Ù†Ø§ØµØ±
const sidebar = document.getElementById('sidebar');
const menuBtn = document.getElementById('menuBtn');
const sections = ['home-section','grades-section','timetable-section','activities-section','contact-section'];
const student = JSON.parse(localStorage.getItem('studentData') || 'null');
if(!student){ alert('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨. Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.'); window.location.href='index.html'; }

// Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
document.getElementById('student-name').textContent = student['Ø§Ù„Ø§Ø³Ù…'];
document.getElementById('student-class').textContent = student['Ø§Ù„ØµÙ'];
document.getElementById('student-section').textContent = student['Ø§Ù„Ø´Ø¹Ø¨Ø©'];
if(student['Ø±Ø³Ø§Ù„Ø©_Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©']){ const am = document.getElementById('admin-msg'); am.style.display='block'; am.innerHTML=student['Ø±Ø³Ø§Ù„Ø©_Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©']; }

// Ø§Ù„Ø£Ø®Ø¨Ø§Ø±
fetch('student/news.json').then(r=>r.json()).then(list=>{
  list.sort((a,b)=> new Date(b.date||b.created_at)-new Date(a.date||a.created_at));
  const container = document.getElementById('news-container'); container.innerHTML='';
  list.slice(0,3).forEach(n=>{
    const card = document.createElement('div'); card.className='news-card';
    card.innerHTML = `<h4>${n.title}</h4><time>${n.date||''}</time><div style="margin-top:6px;font-size:14px;color:#444">${n.description}</div>`;
    container.appendChild(card);
  });
});

// Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª
fetch('student/ac.json').then(r=>r.json()).then(list=>{
  const container = document.getElementById('activities-container'); container.innerHTML='';
  if(!list.length){ container.innerHTML='<p class="light-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ø´Ø§Ø·Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.</p>'; }
  else{
    let html='<table><thead><tr><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ù†Ø´Ø§Ø·</th></tr></thead><tbody>';
    list.forEach(item=>{ html+=`<tr><td>${item.date}</td><td>${item.name}</td></tr>`; });
    html+='</tbody></table>'; container.innerHTML=html;
  }
});

// Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„
function renderGrades(){
  const grades = student['Ø§Ù„Ø¯Ø±Ø¬Ø§Øª'];
  if(!grades){ document.getElementById('grades-container').innerHTML='<p class="light-muted">Ù„Ø§ ØªØªÙˆÙØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ø±Ø¬Ø§Øª.</p>'; return; }
  let html='';
  for(const subj in grades){
    html+=`<h4>${subj}</h4><table><thead><tr>`;
    for(const type in grades[subj]) html+=`<th>${type}</th>`;
    html+='</tr></thead><tbody><tr>';
    for(const type in grades[subj]) html+=`<td>${grades[subj][type]}</td>`;
    html+='</tr></tbody></table>';
  }
  document.getElementById('grades-container').innerHTML=html;
}
renderGrades();

function renderTimetable(){
  const tt = student['Ø§Ù„Ø¬Ø¯ÙˆÙ„'];
  if(!tt){ document.getElementById('timetable-container').innerHTML='<p class="light-muted">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¬Ø¯ÙˆÙ„.</p>'; return; }
  let html='<table><thead><tr><th>Ø§Ù„ÙŠÙˆÙ…</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th></tr></thead><tbody>';
  for(const day in tt){ html+='<tr><td>'+day+'</td>'+tt[day].map(c=>' <td>'+c+'</td>').join('')+'</tr>'; }
  html+='</tbody></table>';
  document.getElementById('timetable-container').innerHTML=html;
}
renderTimetable();

// Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©
menuBtn.onclick=()=>{ sidebar.classList.toggle('active'); }
sections.forEach((id,i)=>{
  const btn = document.getElementById('btn-'+id.split('-')[0]);
  btn.addEventListener('click', ()=>{
    document.querySelectorAll('.main section').forEach(s=>s.classList.add('hidden'));
    document.getElementById(id).classList.remove('hidden');
    sidebar.classList.remove('active');
    document.querySelectorAll('.sidebar button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    window.scrollTo({top:0,behavior:'smooth'});
  });
});

// Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù…
const darkBtn = document.getElementById('btn-dark');
darkBtn.onclick=()=>{
  document.body.classList.toggle('dark');
  localStorage.setItem('darkMode',document.body.classList.contains('dark')?'1':'0');
};
if(localStorage.getItem('darkMode')==='1'){ document.body.classList.add('dark'); }

// ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
document.getElementById('logoutBtn').onclick=()=>{ localStorage.removeItem('studentData'); window.location.href='index.html'; }
</script>
</body>
</html>
