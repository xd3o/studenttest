<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ù„ÙˆØ­Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ - Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ© Ø±Ø§ÙØ¯ÙŠÙ†</title>
<style>
  body {
    margin:0;
    font-family:Arial,sans-serif;
    background: url('https://k.top4top.io/p_3498f7ivx1.png') no-repeat center center fixed;
    background-size: cover;
    color:#333;
  }
  header {
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:12px 20px;
    background:linear-gradient(90deg,#54B8C2,#F4BE45);
    color:#fff;
    position: relative;
  }
  .logo-top { height:50px; }
  #menu-btn {
    font-size:24px;
    background:none;
    border:none;
    color:white;
    cursor:pointer;
  }
  .sidebar {
    position:fixed;
    top:0;
    right:-250px;
    width:250px;
    height:100%;
    background: rgba(255,255,255,0.97);
    box-shadow: -2px 0 6px rgba(0,0,0,0.2);
    padding:15px;
    transition: right 0.3s;
    z-index:1000;
  }
  .sidebar.show { right:0; }
  .sidebar button {
    display:block;
    width:100%;
    margin:10px 0;
    padding:10px;
    border:none;
    border-radius:6px;
    font-size:16px;
    cursor:pointer;
    background:#fff;
    text-align:right;
    box-shadow:0 1px 4px rgba(0,0,0,0.1);
  }
  .sidebar button.active { background: linear-gradient(90deg,#F4BE45,#54B8C2); color:#fff; }
  .main { max-width:1100px; margin:20px auto; padding:20px; background: rgba(255,255,255,0.95); border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
  .student-card { display:flex; gap:15px; align-items:center; margin-bottom:15px; }
  .student-info h2 { margin:0 0 6px 0; }
  .student-meta { color:#555; font-size:14px; }
  .admin-message { margin:12px 0; padding:12px; background:#fff6e6; border-left:4px solid #F4BE45; border-radius:6px; display:none; }
  .section { margin-top:14px; }
  .hidden { display:none; }
  .light-muted { color:#666; font-size:13px; }
  table { width:100%; border-collapse: collapse; margin-top:10px; }
  th,td { border:1px solid #ccc; padding:8px; text-align:center; }
  th { background:#F4BE45; color:#fff; }
  .fail { color:red; font-weight:bold; }
  /* Dark mode */
  body.dark .main, body.dark .sidebar { background: rgba(32,32,32,0.86); color:#e9eef1; }
  body.dark table th, body.dark table td { border-color: rgba(255,255,255,0.2); }
  body.dark .admin-message { background: rgba(255,255,255,0.03); border-left-color: #F4BE45; color:#fff; }
</style>
</head>
<body>

<header>
  <img src="https://e.top4top.io/p_34909jjnx0.png" alt="Ù„ÙˆØºÙˆ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©" class="logo-top">
  <button id="menu-btn">â˜°</button>
</header>

<div class="sidebar" id="sidebar">
  <button data-section="home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
  <button data-section="grades">Ø¯Ø±Ø¬Ø§ØªÙŠ</button>
  <button data-section="timetable">Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</button>
  <button data-section="activities">Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</button>
  <button id="dark-btn">Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù…</button>
  <button data-section="contact">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</button>
</div>

<main class="main">
  <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
  <section id="home-section" class="section">
    <div class="student-card">
      <div style="width:82px;height:82px;border-radius:10px;background:#f1f1f1;display:flex;align-items:center;justify-content:center;font-size:28px;color:#777">ğŸ‘©â€ğŸ“</div>
      <div class="student-info">
        <h2 id="student-name">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</h2>
        <div class="student-meta"><span id="student-class">Ø§Ù„ØµÙ</span> â€” Ø´Ø¹Ø¨Ø© <span id="student-section">Ø§Ù„Ø´Ø¹Ø¨Ø©</span></div>
      </div>
    </div>
    <div id="admin-msg" class="admin-message"></div>
    <div class="section">
      <h3>Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h3>
      <div id="news-container"></div>
    </div>
  </section>

  <!-- Ø¯Ø±Ø¬Ø§ØªÙŠ -->
  <section id="grades-section" class="section hidden">
    <h3>Ø¯Ø±Ø¬Ø§ØªÙŠ</h3>
    <div id="grades-container"></div>
  </section>

  <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ -->
  <section id="timetable-section" class="section hidden">
    <h3>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</h3>
    <div id="timetable-container"></div>
  </section>

  <!-- Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª -->
  <section id="activities-section" class="section hidden">
    <h3>Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</h3>
    <div id="activities-container"></div>
  </section>

  <!-- ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ -->
  <section id="contact-section" class="section hidden">
    <h3>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h3>
    <p class="light-muted">Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªÙˆØ§ØµÙ„ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„.</p>
    <div><a id="fb-link" href="#" target="_blank">ÙÙŠØ³Ø¨ÙˆÙƒ</a> â€” <a id="tg-link" href="#" target="_blank">ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…</a></div>
  </section>
</main>

<script>
const student = JSON.parse(localStorage.getItem('studentData')||'null');
if(!student){ alert('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨. Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.'); window.location.href='index.html'; }

document.getElementById('student-name').textContent = student['Ø§Ù„Ø§Ø³Ù…']||'â€”';
document.getElementById('student-class').textContent = student['Ø§Ù„ØµÙ']||'â€”';
document.getElementById('student-section').textContent = student['Ø§Ù„Ø´Ø¹Ø¨Ø©']||'â€”';

const adminMsg = student['Ø±Ø³Ø§Ù„Ø©']||student['Ø±Ø³Ø§Ù„Ø©_Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©']||'';
if(adminMsg){ 
  const am = document.getElementById('admin-msg');
  am.style.display='block';
  am.textContent = adminMsg;
}

// Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©
const sidebar = document.getElementById('sidebar');
document.getElementById('menu-btn').addEventListener('click',()=> sidebar.classList.toggle('show'));
sidebar.querySelectorAll('button[data-section]').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const sec = btn.getAttribute('data-section');
    document.querySelectorAll('main .section').forEach(s=>s.classList.add('hidden'));
    document.getElementById(sec+'-section').classList.remove('hidden');
    sidebar.classList.remove('show'); // ØªØ®ØªÙÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶ØºØ·
  });
});

// Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù…
const darkBtn = document.getElementById('dark-btn');
darkBtn.addEventListener('click',()=>{
  document.body.classList.toggle('dark');
  localStorage.setItem('darkMode',document.body.classList.contains('dark')?'1':'0');
});
if(localStorage.getItem('darkMode')==='1'){ document.body.classList.add('dark'); }

// Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±
fetch('/student/news.json').then(r=>r.json()).then(list=>{
  const container = document.getElementById('news-container');
  container.innerHTML='';
  list.sort((a,b)=> new Date(b.date)-new Date(a.date));
  list.slice(0,3).forEach(n=>{
    const div = document.createElement('div');
    div.innerHTML=`<h4>${n.title}</h4><time>${n.date}</time><p>${n.description}</p>`;
    container.appendChild(div);
  });
});

// Ø¬Ù„Ø¨ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª
fetch('/student/ac.json').then(r=>r.json()).then(list=>{
  const container = document.getElementById('activities-container');
  container.innerHTML='';
  list.forEach(a=>{
    const div = document.createElement('div');
    div.innerHTML=`<h4>${a.title}</h4><p>${a.description}</p>`;
    container.appendChild(div);
  });
});

// Ø¹Ø±Ø¶ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª
const gradesContainer = document.getElementById('grades-container');
function renderGrades(grades){
  if(!grades){ gradesContainer.innerHTML='<p class="light-muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ø±Ø¬Ø§Øª</p>'; return; }
  let html='<table><thead><tr><th>Ø§Ù„Ù…Ø§Ø¯Ø©</th><th>Ø´Ù‡Ø± 1</th><th>Ø´Ù‡Ø± 2</th><th>Ø´Ù‡Ø± 3</th><th>Ø§Ù„Ø³Ø¹ÙŠ</th><th>Ù†ØµÙ Ø§Ù„Ø³Ù†Ø©</th></tr></thead><tbody>';
  for(const sub in grades){
    const g = grades[sub];
    html+=`<tr><td>${sub}</td><td>${g['month1']||'â€”'}</td><td>${g['month2']||'â€”'}</td><td>${g['month3']||'â€”'}</td><td>${g['sai']||'â€”'}</td><td>${g['mid']||'â€”'}</td></tr>`;
  }
  html+='</tbody></table>';
  gradesContainer.innerHTML = html;
}
renderGrades(student['Ø§Ù„Ø¯Ø±Ø¬Ø§Øª']||student['grades']||null);

// Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ
const timetableContainer = document.getElementById('timetable-container');
function renderTimetable(tt){
  if(!tt){ timetableContainer.innerHTML='<p class="light-muted">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¬Ø¯ÙˆÙ„ Ø£Ø³Ø¨ÙˆØ¹ÙŠ</p>'; return; }
  let html='<table><thead><tr><th>Ø§Ù„ÙŠÙˆÙ…</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th></tr></thead><tbody>';
  for(const day in tt){
    const row = tt[day];
    html+='<tr><td>'+day+'</td>';
    for(let i=0;i<6;i++) html+='<td>'+(row[i]||'â€”')+'</td>';
    html+='</tr>';
  }
  html+='</tbody></table>';
  timetableContainer.innerHTML=html;
}
renderTimetable(student['Ø§Ù„Ø¬Ø¯ÙˆÙ„']||student['timetable']||null);
</script>

</body>
</html>
